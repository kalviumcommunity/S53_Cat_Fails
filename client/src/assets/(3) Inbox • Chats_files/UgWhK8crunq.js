;/*FB_PKG_DELIM*/

__d("LSInMemoryTables",[],(function(a,b,c,d,e,f){"use strict";a="community_members";b="community_members_ranges_v2__generated";c=new Set([a,b]);d=new Set([a,b]);f.all=c;f.onActiveTab=d}),66);
__d("createReStoreEphemeralPersistenceForTables",["FBLogger","LSInMemoryTables","createReStoreEphemeralPersistence"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("createReStoreEphemeralPersistence")(),b=new Set([].concat(Array.from(d("LSInMemoryTables").onActiveTab)));return babelHelpers["extends"]({},a,{logError:function(a,b,d,e){if(d==="dbCorruption"){throw c("FBLogger")("messenger_web_product").mustfixThrow("Got unexpected undefined in edb for tables, mode: %s, table: %s, id: %s, deletedInThisTxn: %s",b,a,(d=e==null?void 0:e.id)!=null?d:"",(b=e==null?void 0:e.deletedInThisTxn)!=null?b:"")}},shouldApplySync:function(a,c){return a==="notifyInMemoryTable"&&b.has(c)},shouldSync:function(a,c){return a==="notifyInMemoryTable"&&b.has(c)}})}g["default"]=a}),98);
__d("createReStoreIndexedDbPersistence",["BrowserLockManager","ClientConsistency","CurrentMessengerUser","Deferred","ExecutionEnvironment","FBLogger","LSPlatformErrorChannel","LSPlatformLsInitLog","LSTransactionLogger","MAWCryptoConsts","MAWExceededStorageQuota","MAWKeychainNaClCrypto","MWBroadcastChannel","MWEARKeychainV3","MWTabNotifier","MessengerLocksManagerFallback","MessengerLogHistory","ODS","Promise","ReStoreBinaryEncoding","ReStoreDbClosedError","ReStoreDbConfigStore","ReStoreDbVersionChange","ReStoreDecryptionFailure","ReStoreErrorAction","ReStorePersistence","asyncToGeneratorRuntime","cr:4038","err","gkx","justknobx","nullthrows","pageID","promiseDone","promiseFromRequest","qex","qpl","recoverableViolation","tweetnacl","unrecoverableViolation","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=d("CurrentMessengerUser").getIDorEIMU(),l=d("MessengerLogHistory").getInstance("db_init"),m=c("qpl")._(25303045,"817"),n=new Set([d("ReStoreDbConfigStore").CONFIG_STORE_NAME]),o=new(d("ReStoreBinaryEncoding").Encoder)(),p=new(d("ReStoreBinaryEncoding").Decoder)();function q(a,b){if(a==null){a===null&&c("FBLogger")("mpf_web_foundations").mustfix("Attempting to decrypt null. This should never happen",String((j||(j=c("ExecutionEnvironment"))).isInWorker));return a}var e=new Uint8Array(a);try{e=e[1];var f=d("MWEARKeychainV3").getDbEncryptionKey(e);f=f.key;var g=3;a=d("tweetnacl").secretbox.open(new Uint8Array(a,g+d("tweetnacl").secretbox.nonceLength),new Uint8Array(a,g,d("tweetnacl").secretbox.nonceLength),new Uint8Array(f));if(a==null){throw new(d("MAWKeychainNaClCrypto").EARDecryptionError)("ReStore was unable to decrypt an entity. Attempting to use key version : "+((g=e)!=null?g:"non-provided")+".")}f=p.decode(a);f===void 0?c("FBLogger")("mpf_web_foundations").mustfix("Decrypted undefined. This should never happen",String((j||(j=c("ExecutionEnvironment"))).isInWorker)):f===null&&c("FBLogger")("mpf_web_foundations").mustfix("Decrypted null. This should never happen",String((j||(j=c("ExecutionEnvironment"))).isInWorker));return f}catch(a){c("LSPlatformErrorChannel").emit(new(d("ReStoreDecryptionFailure").ReStoreDecryptionFailure)(a.message,b));throw new(d("ReStoreDecryptionFailure").ReStoreDecryptionFailure)(a.message,b)}}function r(a,b){if(a==null){a===void 0?c("FBLogger")("mpf_web_foundations").mustfix("Attempting to encrypt undefined. This should never happen",String((j||(j=c("ExecutionEnvironment"))).isInWorker)):c("FBLogger")("mpf_web_foundations").mustfix("Attempting to encrypt null. This should never happen",String((j||(j=c("ExecutionEnvironment"))).isInWorker));return a}try{var e=d("MWEARKeychainV3").getDbEncryptionKey(),f=e.key;e=e.version;e=new Uint8Array([0,e,d("MAWCryptoConsts").CIPHER_ID]);var g=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);a=d("tweetnacl").secretbox(o.encode(a),g,new Uint8Array(f));f=new Uint8Array(e.length+g.length+a.length);f.set(e);f.set(g,e.length);f.set(a,e.length+g.length);return f.buffer}catch(a){throw c("err")(a.message+" - Encrypted LSDB was unable to encrypt an entity for table "+b)}}function s(a){for(a of a.values())if(a.size!==0)return!1;return!0}function t(a,b){var c=[];a=new Set(a);for(var d of a)b.objectStoreNames.contains(d)||c.push(d);d=[];for(var e=0;e<b.objectStoreNames.length;e++){var f=b.objectStoreNames[e];!a.has(f)&&!n.has(f)&&d.push(f)}if(c.length!==0||d.length!==0)return[c,d]}function u(a,b){if(b==null){l.debug("Schema doesn't have changes to apply");return}l.debug("Schema has changes to apply");var c=b[0];b=b[1];c.forEach(function(b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{autoIncrement:!0})});b.forEach(function(b){a.objectStoreNames.contains(b)&&a.deleteObjectStore(b)})}function v(a,e,f,g){function h(a){f(a.target),l.debug("DB onversionchange TABID="+c("pageID")),c("FBLogger")("mpf_web_foundations").info("[pdb] onversionchange inWorker=%s",String((j||(j=c("ExecutionEnvironment"))).isInWorker)),d("LSPlatformLsInitLog").fail("version_change"),c("LSPlatformErrorChannel").emit(new(d("ReStoreDbVersionChange").ReStoreDbVersionChange)())}return new(i||(i=b("Promise")))(function(b,f){var i=indexedDB.open(a,g);i.onupgradeneeded=function(a){a=a.target;var b=a.result;a=a.transaction;e(b,a)};i.onerror=function(a){d("LSPlatformLsInitLog").fail("failed_to_open_pdb"),f(c("unrecoverableViolation")("Failed to open db","messenger_web_product",{error:a.target.error}))};i.onsuccess=function(a){a=a.target.result;a.addEventListener("versionchange",h);b(a)}})}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,d,e){a=a.objectStore(d);if(!("getAll"in a)||!("getAllKeys"in a))return new Map();var f=(yield c("promiseFromRequest")(a.getAllKeys()));f=f.length>e?f[f.length-e]:void 0;f=f!=null?IDBKeyRange.lowerBound(f,!1):void 0;a=(yield (i||(i=b("Promise"))).all([c("promiseFromRequest")(a.getAllKeys(f,e)),c("promiseFromRequest")(a.getAll(f,e))]));f=a[0];e=a[1];if(f.length!==e.length){c("recoverableViolation")("Error pre-caching "+d+" IDB table","messenger_web_product");return new Map()}a=new Map();for(d=0;d<f.length;++d)a.set(f[d],{status:"encrypted",value:e[d]});return a});return x.apply(this,arguments)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f;d("LSPlatformLsInitLog").addPoint("cache_init_start");var g=(f=c("qex")._("338"))!=null?f:100;try{f=Array.from(a.objectStoreNames).filter(function(a){return!a.startsWith("_")});var h=a.transaction([].concat(f),"readonly");yield (i||(i=b("Promise"))).all(f.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield w(h,a,g));e.set(a,b)});return function(b){return a.apply(this,arguments)}}()));d("LSPlatformLsInitLog").addPoint("cache_init_end")}catch(a){c("recoverableViolation")("Error initting ReStore cache","messenger_web_product",{error:a}),d("LSPlatformLsInitLog").addPoint("cache_init_failed"),e.clear()}return a});return z.apply(this,arguments)}function A(a,b,c,d){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){function h(a){d("LSPlatformLsInitLog").addAnnotations({bool:{dbEmpty:!0}});d("ReStoreDbConfigStore").createDbConfig(a,g.defaultConfig);for(var b of e)a.createObjectStore(b,{autoIncrement:!0})}d("LSPlatformLsInitLog").addPoint("idb_open_start");var k=(yield v(a,h,f));d("LSPlatformLsInitLog").addPoint("idb_open_end");var m=k.transaction(d("ReStoreDbConfigStore").CONFIG_STORE_NAME,"readonly");m=(yield (i||(i=b("Promise"))).all([d("ReStoreDbConfigStore").detectConfigMismatch(m,g),d("ReStoreDbConfigStore").readCorruptionFailuresFromConfig(m).then(function(a){return(a=a==null?void 0:a.value)!=null?a:0})]));var n=m[0];m=m[1];var o=m>0;o&&(c("FBLogger")("mpf_web_foundations").info("[pdb] opening corrupted db failures=%s inWorker=%s",String(m),String((j||(j=c("ExecutionEnvironment"))).isInWorker)),l.debug("DB corrupted, deleting db"));n&&l.debug("DB config mismatch, deleting db");d("LSPlatformLsInitLog").addAnnotations({bool:{configMismatch:n,dbCorruptionOccured:o}});if(n||o){k.close();(m=d("LSPlatformLsInitLog")).addPoint("delete_db_start");yield c("promiseFromRequest")(indexedDB.deleteDatabase(a));m.addPoint("delete_db_end");m.addPoint("re_open_db_start");k=(yield v(a,h,f));m.addPoint("re_open_db_end")}else{var p=t(e,k);p!=null&&(l.debug("Schema mismatch, bumping db version"),k.close(),d("LSPlatformLsInitLog").addPoint("schema_mismatch_bump_version_start"),k=(yield v(a,function(a){return u(a,p)},f,k.version+1)),d("LSPlatformLsInitLog").addPoint("schema_mismatch_bump_version_end"))}return k});return B.apply(this,arguments)}function a(a,e,f){var g=k+"-"+a,n="dbLock-"+g,o=!0,p,t=[],u=!1,w=!1,x=b("cr:4038")!=null&&c("BrowserLockManager")!=null?new(b("cr:4038").RestoreConcurrencyManager)({onLockAcquired:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!o)return;var a=(yield J());C!==a&&C!=null&&(D.clear(),c("FBLogger")("mpf_web_foundations").info("[pdb] cache dropped, out of date cache version"));w=!0;C=a});function d(){return a.apply(this,arguments)}return d}(),onLockReleased:function(){w=!1;return(i||(i=b("Promise"))).resolve()}}):null;l.debug("PDB is ON");d("LSPlatformLsInitLog").addPoint("init_idb_start");var z="mwChat-flushchanges-"+k+"-"+a,B=d("MWBroadcastChannel").MWBroadcastChannel(z),C=void 0,D=new Map(),E=c("nullthrows")((z=c("BrowserLockManager"))!=null?z:c("MessengerLocksManagerFallback")(c("uuidv4")().toString())),F=new(i||(i=b("Promise")))(function(d,g){var h=c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").startTracking(!0,m,void 0,n);c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").addAnnotations(m,h,{string:{source:"createReStoreIndexedDbPersistence",type:"initDB"}});c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(m,h,"lock_requested");c("promiseDone")(E.request(n,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(m,h,"lock_granted");try{var b=(yield A(a,e,G,f));c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(m,h,"db_initialized");B.addEventListener("message",M);d(b);c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").end(m,h)}catch(a){g(a),c("FBLogger")("mpf_web_foundations").catching(a).warn("[pdb] dbLock initDB issue"),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").fail(m,h)}})),function(a){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").end(m,h)},function(a){c("FBLogger")("mpf_web_foundations").catching(a).warn("[pdb] dbLock idbPromise issue"),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").fail(m,h)})});c("promiseDone")(F.then(function(){d("LSPlatformLsInitLog").addPoint("init_idb_end")}));c("qex")._("403")&&c("promiseDone")(R(function(){return F.then(function(a){return y(a,D)})}));function G(a){a.close(),o=!1,x==null?void 0:x.release(),B.removeEventListener("message",M)}function H(a,b,c){c=a.transaction(c!=null&&c.length>0?c:a.objectStoreNames,b,{durability:"relaxed"});d("MAWExceededStorageQuota").listenToQuotaExceededError(c);return c}function I(a){var b=D.get(a);b==null&&(b=new Map(),D.set(a,b));return b}function J(a){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=L);return(a=(yield a(function(a){return c("promiseFromRequest")(a.objectStore(d("ReStoreDbConfigStore").CONFIG_STORE_NAME).get(d("ReStoreDbConfigStore").CACHE_VERSION_KEY))})))==null?void 0:a.value});return K.apply(this,arguments)}function L(a){function c(a){var b=H(a,"readonly");b.onabort=function(){p===b&&(p=null)};p=b}return new(i||(i=b("Promise")))(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d,e){t.push(function(b){return a(b).then(d)});var f=(yield F);if(p==null)try{c(f)}catch(a){return e(a)}if(!u){u=!0;while(t.length){f=t;t=[];yield (i||(i=b("Promise"))).all(f.map(function(a){return a(p)}))}u=!1;(e=p)==null?void 0:e.commit==null?void 0:e.commit();p=null}});return function(a,b){return d.apply(this,arguments)}}())}function M(a){a=a.data;var b=a.changeSet,d=a.fromVersion,e=a.sentinelDeleted;a=a.toVersion;if(w){c("FBLogger")("mpf_web_foundations").info("[pdb] unexpected cache update received after verifying cache matches db, ignoring");return}C!==d&&C!=null&&(D.clear(),c("FBLogger")("mpf_web_foundations").info("[pdb] out of order cache update received"));C=a;b.forEach(function(a,b){var c=I(b);a.forEach(function(a,b){a===e?c["delete"](b):c.set(b,{status:"decrypted",value:a})})})}function N(){return O.apply(this,arguments)}function O(){O=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;if(!o)return;var e=(a=(a=(yield L(function(a){return d("ReStoreDbConfigStore").readCorruptionFailuresFromConfig(a)})))==null?void 0:a.value)!=null?a:0;c("promiseDone")(F,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=H(a,"readwrite");yield d("ReStoreDbConfigStore").writeCorruptionFailuresToConfig(a,e)});return function(b){return a.apply(this,arguments)}}())});return O.apply(this,arguments)}function P(){c("promiseDone")(F,function(a){G(a)})}function Q(){if(!o)throw new(c("ReStoreDbClosedError"))()}function R(a){return S.apply(this,arguments)}function S(){S=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield F;c("gkx")("789")&&Q();if(c("gkx")("2031")&&c("justknobx")._("1699")){var e=c("ClientConsistency").getAdditionalRevisions();e.size>0&&(c("FBLogger")("mpf_web_foundations").info("[pdb] js mismatch detected"),d("ReStoreErrorAction").softRefresh())}return x!=null?x.runExclusively(a):new(i||(i=b("Promise")))(function(d,e){var f=c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").startTracking(!0,m,void 0,n);c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").addAnnotations(m,f,{string:{source:"createReStoreIndexedDbPersistence",type:"runExclusivelyLock"}});c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(m,f,"lock_requested");c("promiseDone")(E.request(n,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(m,f,"lock_granted");try{var b=(yield J());c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(m,f,"cache_version_read");C!==b&&C!=null&&(c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(m,f,"cache_clearing"),D.clear(),c("FBLogger")("mpf_web_foundations").info("[pdb] cache dropped, out of date cache version"),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").mark(m,f,"cache_cleared"));C=b;w=!0;b=(yield a());w=!1;d(b);c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").end(m,f)}catch(a){w=!1,e(a),c("FBLogger")("mpf_web_foundations").catching(a).warn("[pdb] dbLock cacheRequest issue"),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").fail(m,f)}})),function(a){c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").end(m,f)},function(a){c("FBLogger")("mpf_web_foundations").catching(a).warn("[pdb] dbLock runExclusively issue"),c("LSTransactionLogger")==null?void 0:c("LSTransactionLogger").fail(m,f)})})});return S.apply(this,arguments)}return{clearCache:function(){D.clear()},close:P,flush:function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f){f=f.upgrade;if(!o)return;var g=c("uuidv4")(),h=c("nullthrows")(C);function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var f=new(i||(i=b("Promise")))(function(b,f){a.oncomplete=function(a){try{B.postMessage({changeSet:e,fromVersion:h,sentinelDeleted:d("ReStorePersistence").sentinelDeleted,toVersion:g})}catch(a){c("recoverableViolation")("Failed to broadcast changes","messenger_web_product",a)}b(a.target.result)},a.onerror=a.onabort=function(a){C=null,D.clear(),f(a)}});if(c("gkx")("9005")){var j=(yield J(function(b){return b(a)}));if(j!=null&&h!=null&&j!==h)throw c("FBLogger")("mpf_web_foundations").mustfixThrow("About to commit corruption due to cache version mismatch. Expected %s but got %s",h,j)}j=!1;for(var k of e){var l=k[0],n=k[1],o=a.objectStore(l);for(n of n){var p=n[0],q=n[1],s;if(q===d("ReStorePersistence").sentinelDeleted)s=o["delete"](p);else{q=r(q,l);s=o.put(q,p)}s.onerror=function(){return j=!0}}}yield c("promiseFromRequest")(a.objectStore(d("ReStoreDbConfigStore").CONFIG_STORE_NAME).put({name:d("ReStoreDbConfigStore").CACHE_VERSION_KEY,value:g}));j?a.abort():a.commit!=null&&a.commit();yield f});return k.apply(this,arguments)}function l(){Array.from(e).forEach(function(a){var b=a[0];a=a[1];var c=I(b);Array.from(a).forEach(function(a){var b=a[0];a=a[1];a===d("ReStorePersistence").sentinelDeleted?c["delete"](b):c.set(b,{status:"decrypted",value:a})})}),C=g}if(s(e))return;var n=(yield F);if(f===!0){c("FBLogger")("mpf_web_foundations").info("[pdb] Updating IDB version, fromVersion: %s, non-empty tables: %s",n.version,Array.from(e.entries()).filter(function(a){a[0];a=a[1];return a.size>0}).map(function(a){a=a[0];return a}).sort().toString());(f=p)==null?void 0:f.abort();n.close();D.clear();C=null;F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=new(c("Deferred"))(),d=(yield v(a,function(a,d){l(),c("promiseDone")(j(d),function(){b.resolve()},function(){b.reject()})},G,n.version+1));yield b.getPromise();return d})();yield F;return}if(e.size===0)return;l();f=function(){var a=Array.from(e.keys());a.push(d("ReStoreDbConfigStore").CONFIG_STORE_NAME);return j(H(n,"readwrite",a))};if(x!=null)return x.queueFlush(f);else yield f()});function f(a,b){return e.apply(this,arguments)}return f}(),get:function(e,f,g){try{var j=I(f);if(j.has(g)){e=j.get(g);if((e==null?void 0:e.status)==="encrypted"){var k=q(e.value,f);j.set(g,{status:"decrypted",value:k});return k}return e==null?void 0:e.value}else{if(!o)return new(i||(i=b("Promise")))(function(){});var l=L(function(a){return c("promiseFromRequest")(a.objectStore(f).get(g))}).then(function(a){var b=j.get(g);if((b==null?void 0:b.value)!==l)return b==null?void 0:b.value;b=q(a,f);j.set(g,{status:"decrypted",value:b});return b});j.set(g,{status:"pending",value:l});return l}}catch(b){c("gkx")("3676")&&b instanceof d("ReStoreDecryptionFailure").ReStoreDecryptionFailure?c("promiseDone")(F,function(b){G(b);b=indexedDB.deleteDatabase(a);b.onerror=function(){(h||(h=d("ODS"))).bumpEntityKey(3185,"db_delete","error.persistence"),c("recoverableViolation")("[pdb] Failed to delete db","messenger_web_product")};b.onblocked=function(){(h||(h=d("ODS"))).bumpEntityKey(3185,"db_delete","block.persistence")};b.onsuccess=function(){(h||(h=d("ODS"))).bumpEntityKey(3185,"db_delete","success.persistence")}}):c("FBLogger")("mpf_web_foundations").catching(b).warn("Error occurs in indexeddb persistence get");throw b}},isClosed:function(){return!o},logError:function(a,b,d,e){if(d==="dbCorruption"){b==="readwrite"&&c("promiseDone")(N());throw c("FBLogger")("mpf_web_foundations").mustfixThrow("Got unexpected undefined in pdb, mode: %s, table: %s, id: %s, deletedInThisTxn: %s",b,a,(d=e==null?void 0:e.id)!=null?d:"",(b=e==null?void 0:e.deletedInThisTxn)!=null?b:"")}},queueCommitWork:function(a){return x!=null?(i||(i=b("Promise"))).resolve(x.queueFlush(a)):a()},runExclusively:R,shouldApplySync:function(){return!0},shouldSync:function(a,b){return a==="notifyInMemoryTable"?!1:!0},tabTablesNotifier:function(){var a="restore-table-"+g;a=(j||(j=c("ExecutionEnvironment"))).isInBrowser?c("MWTabNotifier")(a):void 0;return a},types:["indexeddb"],uniqueId:g}}a.schemaDiff=t;a.applyChanges=u;g["default"]=a}),98);
__d("MAWDropCutoverThreadsTable",["Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var c=d("ReQL").fromTableAscending(a.cutover_threads);return d("ReQL").toArrayAsync(c).then(function(c){return c.reduce(function(b,c){return b.then(function(){return a.table("cutover_threads")["delete"](c.openThreadId)})},(h||(h=b("Promise"))).resolve())})}g.call=a}),98);
__d("LSDBRestoreConfig",["ReStoreDbConfigStore","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";e=c("gkx")("4463");f=c("justknobx")._("347");function a(){return 2}var h={localVersion:a(),name:d("ReStoreDbConfigStore").DB_CONFIG_KEY,serverVersion:f,vaulting:e};function b(){return{defaultConfig:h,isEqual:function(a){return(a==null?void 0:a.localVersion)==null?!1:(a==null?void 0:a.localVersion)===h.localVersion&&(a==null?void 0:a.vaulting)===h.vaulting&&(a==null?void 0:a.serverVersion)===h.serverVersion}}}g.createConfig=b}),98);
__d("migrateEBSMTablesToPDB",["EBSMProperties","FBLogger","LSMetadata","MAWCurrentUser","MAWIndexedDbMetadata","MAWLSVaultingHooks","MWSetupEBStateDB","Promise","ReStore","asyncToGeneratorRuntime","clearTimeout","err","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(indexedDB==null)return;var e=d("MAWIndexedDbMetadata").ebLSDBName(d("MAWCurrentUser").getID());if(typeof window.indexedDB.databases==="function"){var f=(yield window.indexedDB.databases());if(f.find(function(a){return a.name===e})==null)return}else{var g;f=(yield (h||(h=b("Promise"))).race([new h(function(a,b){var d=indexedDB.open(e);d.onupgradeneeded=function(b){b.target.transaction.abort(),a(!1)};d.onsuccess=function(b){b.target.result.close(),a(!0)};d.onerror=function(a){b(c("err")("ebsm migration error in checking db existance "+((a=a.target)==null?void 0:(a=a.error)==null?void 0:a.message)))}}),new h(function(a,b){g=c("setTimeout")(function(){b(c("err")("ebsm db is not available. resolving on timeout"))},300)})]));c("clearTimeout")(g);if(f===!1)return}f=(yield d("MWSetupEBStateDB").makeEBStateDB(!0));if(f==null)return;var i=c("ReStore")(f,d("LSMetadata").metadata,[c("MAWLSVaultingHooks")]);yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=function*(d){var e=c("EBSMProperties").persistedTablesArray[d];yield i.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b.table(e).entries(new WeakMap());var c=(yield b.next());while(!c.done){var d=c.value;d[0];d=d[1];yield a.table(e).put(d);c=(yield b.next())}return});return function(a){return c.apply(this,arguments)}}(),"readwrite")};for(var e=0;e<c("EBSMProperties").persistedTablesArray.length;e++)yield* d(e)});return function(b){return a.apply(this,arguments)}}(),"readwrite")});return j.apply(this,arguments)}function k(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("MAWIndexedDbMetadata").ebLSDBName(d("MAWCurrentUser").getID());if(typeof window.indexedDB.databases==="function"){var c=(yield window.indexedDB.databases());if(c.find(function(b){return b.name===a})==null)return}return new(h||(h=b("Promise")))(function(b,c){var d=window.indexedDB.deleteDatabase(a);d.onsuccess=b;d.onfailure=c})});return l.apply(this,arguments)}function a(a){return i(a)["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Error migrating data from EBSM to PDB")}).then(function(){return k()})["catch"](function(a){c("FBLogger")("messenger_web_product").catching(a).mustfix("Error cleaning up data in EBSM post PDB startup.")})}g["default"]=a}),98);
__d("IndexedDbStorage",["LSDBRestoreConfig","LSInMemoryTables","MAWLSVaultingHooks","ReStore","asyncToGeneratorRuntime","createReStoreEphemeralPersistenceForTables","createReStoreIndexedDbPersistence","createReStoreTableNameAllowListPersistence","justknobx","migrateEBSMTablesToPDB"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set([].concat(Array.from(d("LSInMemoryTables").all)));function i(a,b){a=c("createReStoreIndexedDbPersistence")(a,b,d("LSDBRestoreConfig").createConfig());b=c("justknobx")._("440");if(b){b=c("createReStoreEphemeralPersistenceForTables")();return c("createReStoreTableNameAllowListPersistence")(a,b,h)}else return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=i(a,Object.keys(b.tableIds).map(function(a){return b.tableIds[Number(a)].name}));a=c("ReStore")(a,b,[c("MAWLSVaultingHooks")]);c("migrateEBSMTablesToPDB")&&(yield c("migrateEBSMTablesToPDB")(a));return a});return j.apply(this,arguments)}g["default"]=a}),98);
__d("MWConditionallySetupEBStateDB",["asyncToGeneratorRuntime","cr:6693"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!1);if(b("cr:6693")!=null){a=(yield b("cr:6693").makeEBStateDB(a));return a}});return h.apply(this,arguments)}g.conditionallyMakeEBStateDB=a}),98);
__d("MWLSSchemaEphemeral",["FBLogger","LSJSInMemoryStorage","LSMetadata","LSPlatformLsInitLog","MAWLSVaultingHooks","MWConditionallySetupEBStateDB","MessengerLogHistory","ReStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("db_init");function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("LSPlatformLsInitLog").addPoint("init_start");var a;try{var b=(yield d("MWConditionallySetupEBStateDB").conditionallyMakeEBStateDB());b!=null&&(h.debug("Creating EB State DB"),a=c("ReStore")(b,d("LSMetadata").metadata,[c("MAWLSVaultingHooks")]),h.debug("EB State DB inited"))}catch(a){c("FBLogger")("messenger_web_clients").catching(a).mustfix("EBSM failed")}a==null&&(h.debug("Creating EDB"),a=c("LSJSInMemoryStorage")(d("LSMetadata").metadata),h.debug("EDB inited"));d("LSPlatformLsInitLog").addPoint("init_end");return a});return i.apply(this,arguments)}g.createDB=a}),98);
__d("MWLSSchemaEphemeralProxy",["MWLSSchemaEphemeral"],(function(a,b,c,d,e,f){"use strict";Object.keys(importNamespace("MWLSSchemaEphemeral")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("MWLSSchemaEphemeral")[a]})}),null);
__d("MWLSSchemaIndexedDB",["IndexedDbStorage","InteractionTracing","LSMetadata","LSPlatformLsInitLog","MWLSIndexedDBDelete","MWLSIndexedDBName","MWLSSchemaEphemeralProxy","MWSetupDBEncryption","MessengerLogHistory","asyncToGeneratorRuntime","cr:6468","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h=d("MessengerLogHistory").getInstance("db_init");f=typeof window!=="undefined"?window:self;var i=f==null?void 0:(f=f.navigator)==null?void 0:f.locks;f=(f=b("cr:6468"))!=null?f:{MAWInit:{measurePerformance:function(a,b){return b()}}};var j=f.MAWInit;function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("LSPlatformLsInitLog").addPoint("support_check_start");var a=(yield m());d("LSPlatformLsInitLog").addPoint("support_check_end",{bool:{using_pdb:a}});c("InteractionTracing").getPendingInteractions().forEach(function(b){b.addAnnotationBoolean("using_pdb",a)});if(!a)return d("MWLSSchemaEphemeralProxy").createDB();d("LSPlatformLsInitLog").addPoint("init_start");h.debug("Creating indexeddb persistence");var b=(yield c("IndexedDbStorage")(d("MWLSIndexedDBName").dbName(),d("LSMetadata").metadata));h.debug("Persistence created");d("LSPlatformLsInitLog").addPoint("init_end");return b});return k.apply(this,arguments)}function e(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{b.closeDb==null?void 0:b.closeDb(),yield d("MWLSIndexedDBDelete").deleteIndexedDB(a)}catch(a){c("recoverableViolation")("[pdb] Cannot delete db","messenger_web_product")}});return l.apply(this,arguments)}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(i==null)return!1;h.debug("Creating EAR");d("MWSetupDBEncryption").setPerformanceMeasurementTool(j.measurePerformance);d("LSPlatformLsInitLog").addPoint("ear_db_init_start");var a=(yield d("MWSetupDBEncryption").init());if(!a.success){d("LSPlatformLsInitLog").addPoint("ear_db_init_failed");h.debug("EAR failed, PDB is OFF.");return!1}d("LSPlatformLsInitLog").addPoint("ear_db_init_end");h.debug("EAR created");return!0});return n.apply(this,arguments)}g.createDB=a;g.deleteDB=e;g.isSupported=m}),98);
__d("isOccamadilloResumeSyncEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("6551")&&c("gkx")("4471")&&c("gkx")("4463")}g["default"]=a}),98);
__d("LSE2EEMetadataSyncGroupUtils",["gkx","isArmadillo","isInstamadillo","isOccamadilloResumeSyncEnabled","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=c("isArmadillo")()||c("gkx")("9017")===!0&&!c("isInstamadillo")(),i=c("qex")._("923")===!0&&!c("isInstamadillo")();function a(){return h&&!c("isOccamadilloResumeSyncEnabled")()}function b(){return h?{groupId:95}:null}function d(){return i?{groupId:95}:null}g.shouldAlwaysResetE2EEMetadata=a;g.getE2EEMetadataSyncGroup=b;g.getE2EEMetadataSyncGroupForIGDSyncGroup=d}),98);
__d("LSMailboxInitialSyncCursor",["I64","LSPlatformMessengerSyncParams","LSPlatformWorkplaceSyncParams","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;a=c("gkx")("1224637")?c("LSPlatformWorkplaceSyncParams").mailbox:c("LSPlatformMessengerSyncParams").mailbox;b=(h||(h=d("I64"))).of_int32(c("qex")._("422")===!0?3:1);e=h.of_int32(0);g.syncParams=a;g.syncChannel=b;g.lastSyncTimestampMs=e}),98);
__d("LSDatabase",[],(function(a,b,c,d,e,f){}),null);
__d("LSSyncGroupsUtils",["CurrentLocale","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h;a={canIgnoreTimestamp:!1,currentCursor:void 0,dataTraceId:void 0,groupId:(h||(h=d("LSIntEnum"))).ofNumber(0),initTraceTimestampMs:void 0,lastSyncCompletedTimestampMs:void 0,lastSyncRequestTimestampMs:h.ofNumber(0),minTimeToSyncTimestampMs:h.ofNumber(-1),priority:h.ofNumber(0),regionHint:void 0,sendSyncParams:!0,syncChannel:h.ofNumber(1),syncParams:JSON.stringify({locale:c("CurrentLocale").get()}),syncStatus:h.ofNumber(0)};b={epochId:void 0,failureCount:h.ofNumber(0),lastDelayedRequestTimestampMs:void 0,lastSentTimestampMs:h.ofNumber(0),lastSyncRequestTimestampMs:h.ofNumber(0),networkTaskIdentifier:void 0,syncDatabaseId:h.ofNumber(0),taskQueueName:""};e=h.ofNumber(9999999999999);g.defaultSyncGroup=a;g.defaultNetworkRequest=b;g.neverSyncTimestamp=e}),98);
__d("MNetRankType",[],(function(a,b,c,d,e,f){a=Object.freeze({INBOX_ACTIVE_NOW:0,MESSENGER_USER_SEARCH:1,MONTAGE_USER:2,BROADCAST_FLOW_TOP_CONTACTS:3,BROADCAST_FLOW_NEEDY_CONTACTS:4,MESSENGER_GROUP_SEARCH:5,RTC_TOP_CONTACTS:6,PSTN_TOP_CONTACTS:7,MESSENGER_NON_CONTACT_SEARCH:8,MESSENGER_SEARCH_BOOTSTRAP:9,ACTIVE_BEEPER:10,MONTAGE_AND_ACTIVE_NOW:11,MESSENGER_PAGE_SEARCH:12,MESSENGER_GAME_SEARCH:13,WWW_NULLSTATE:14,RTC_GROWTH:15,MESSENGER_OMNIPICKER_NULLSTATE:16,RTC_SEQUENTIAL_TOP_CONTACTS:17,MESSENGER_USER_SEARCH_NULLSTATE:18,MLITE_DIODE_PROMOTION:19,MESSENGER_PENDING_REQUEST:20,MESSENGER_CLOSE_CONNECTION:21,MESSENGER_MONTAGE_SEEN_SHEET:22,MESSENGER_OMNIPICKER_KEYPRESS:23,MESSENGER_NOTIF_QP_TARGETING_UPSELL_TYPE:24,CONTACT_TAB_ACTIVE_NOW:26,MESSENGER_UNIV_NULLSTATE_BLEND:27,MESSENGER_INBOX_THREADS:28,INBOX_ACTIVE_NOW_NO_BOOSTING:29,BROADCAST_FLOW_TOP_CONTACTS_FB_SHARE:30,BROADCAST_FLOW_TOP_CONTACTS_MESSENGER_SHARE:31,BROADCAST_FLOW_TOP_CONTACTS_EXTERNAL_SHARE:32,MESSENGER_TRENDING_STICKERS:33,MESSENGER_BROADCAST_FLOW_TOP_THREADS:34,MESSENGER_SENDS_28D:35,MESSENGER_ROOM_INVITE:36,MESSENGER_ROOM_INVITE_SEARCH:37,INBOX_ACTIVE_NOW_PREFETCH:38,MESSENGER_BLENDED_KEYPRESS:39,MESSENGER_BLENDED_NULLSTATE:40,MESSENGER_CARRIER_MESSAGING:41,MESSENGER_ROOM_INVITE_GROUP:42,MESSENGER_INBOX_BIRTHDAY_ITEM:43,INSTAGRAM_DIRECT_SEARCH_NULLSTATE:44,BROADCAST_FLOW_TOP_CONTACTS_AND_TOP_THREAD_FB_SHARE:45,BROADCAST_FLOW_TOP_THREADS_FB_SHARE:46,FB_H_SCROLL_RANKING:47,FB_MESSAGING_USER_SEARCH:48,FB_MESSAGING_USER_SEARCH_NULLSTATE:49,MESSENGER_ACTIVE_NOW_TRAY_ACTIVE_CC:50,MESSENGER_SHARE_SHEET:51,MESSENGER_COMMUNITY_TAB_UNJOINED_COMMUNITIES:52});f["default"]=a}),66);
__d("seedUserInfo",["CurrentMessengerUser","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("CurrentMessengerUser").getIDorEIMU();return a.table("_user_info").put({facebookUserId:(h||(h=d("I64"))).of_string(b),id:(i||(i=d("LSIntEnum"))).ofNumber(1)})}g["default"]=a}),98);
__d("LSDefaultSyncGroups",["CurrentEnvironment","LSE2EEMetadataSyncGroupUtils","LSIntEnum","LSMailboxInitialSyncCursor","LSPlatformLsInitLog","LSSyncGroupsUtils","MNetRankType","Promise","ReQL","asyncToGeneratorRuntime","gkx","qex","seedUserInfo"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Set();d("LSE2EEMetadataSyncGroupUtils").shouldAlwaysResetE2EEMetadata()&&j.add(95);e=d("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroup();var k=[{groupId:1},{groupId:2},{groupId:6},{groupId:7,syncParams:JSON.stringify({mnet_rank_types:[c("MNetRankType").INSTAGRAM_DIRECT_SEARCH_NULLSTATE]})},{groupId:16},{groupId:28},{groupId:196},{groupId:198},d("LSE2EEMetadataSyncGroupUtils").getE2EEMetadataSyncGroupForIGDSyncGroup(),{groupId:118,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp},c("gkx")("6348")?{groupId:89}:null,c("gkx")("6348")?{groupId:197}:null],l=[{groupId:1,lastSyncRequestTimestampMs:d("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel,syncParams:d("LSMailboxInitialSyncCursor").syncParams},{groupId:2,lastSyncRequestTimestampMs:d("LSMailboxInitialSyncCursor").lastSyncTimestampMs,syncChannel:d("LSMailboxInitialSyncCursor").syncChannel},{groupId:7,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp,syncParams:JSON.stringify({mnet_rank_types:[c("MNetRankType").MESSENGER_USER_SEARCH,c("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE,c("MNetRankType").INBOX_ACTIVE_NOW,c("MNetRankType").MESSENGER_OMNIPICKER_NULLSTATE,c("MNetRankType").MESSENGER_BROADCAST_FLOW_TOP_THREADS,c("MNetRankType").BROADCAST_FLOW_TOP_CONTACTS]})},{groupId:15,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp},{groupId:12,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp},{groupId:16},{groupId:140},{groupId:141},{groupId:142},{groupId:143},{groupId:26},{groupId:5},{groupId:28},{groupId:118,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp},{groupId:196},{groupId:104},{groupId:198},e,c("gkx")("2096")?{groupId:120}:null,c("qex")._("136")||c("gkx")("10640")?{groupId:208}:null,c("gkx")("5849")?{groupId:6,minTimeToSyncTimestampMs:d("LSSyncGroupsUtils").neverSyncTimestamp}:null,c("gkx")("2250")?{groupId:108}:null,c("gkx")("10823")?{groupId:89}:null,c("gkx")("10823")?{groupId:197}:null];function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("network_requests")).getKeyRange(""))),f=e.map(function(a){a=a.syncDatabaseId;return(i||(i=d("LSIntEnum"))).toNumber(a)});return(h||(h=b("Promise"))).all(c.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b!=null&&(!f.includes(b.groupId)||j.has(b.groupId))&&(yield a.table("network_requests").put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultNetworkRequest,{syncDatabaseId:(i||(i=d("LSIntEnum"))).ofNumber(b.groupId)})))});return function(a){return c.apply(this,arguments)}}()))});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(a.table("sync_groups")))),f=e.map(function(a){a=a.groupId;return(i||(i=d("LSIntEnum"))).toNumber(a)});function g(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b.groupId;b=babelHelpers.objectWithoutPropertiesLoose(b,["groupId"]);(!f.includes(c)||j.has(c))&&(yield a.table("sync_groups").put(babelHelpers["extends"]({},d("LSSyncGroupsUtils").defaultSyncGroup,b,{groupId:(i||(i=d("LSIntEnum"))).ofNumber(c)})))});return k.apply(this,arguments)}yield (h||(h=b("Promise"))).all(c.map(function(a){return a&&g(a)}))});return p.apply(this,arguments)}function q(a){return a!=null?a:c("CurrentEnvironment").instagramdotcom?k:l}function a(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=q(b);d("LSPlatformLsInitLog").addPoint("db_seed_start");yield c("seedUserInfo")(a);yield m(a,b);yield o(a,b);d("LSPlatformLsInitLog").addPoint("db_seed_end")});return r.apply(this,arguments)}g.e2eeMetadataSyncGroup=e;g.igdSyncGroups=k;g.defaultSyncGroups=l;g.seedDb=a}),98);
__d("UserTimingUtils",["performance","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=typeof (h||(h=c("performance"))).mark==="function"&&typeof (h||(h=c("performance"))).clearMarks==="function"&&typeof (h||(h=c("performance"))).measure==="function"&&typeof (h||(h=c("performance"))).clearMeasures==="function",j=!1;if(i&&(h||(h=c("performance"))).mark!=null){var k="__v3",l={};Object.defineProperty(l,"startTime",{get:function(){j=!0}});try{(h||(h=c("performance"))).mark(k,l)}catch(a){}finally{(h||(h=c("performance"))).clearMarks(k)}}function a(a){i&&(h||(h=c("performance"))).mark(a)}function d(a,b,d){d===void 0&&(d=!0);if(i){try{(h||(h=c("performance"))).measure(a,b)}catch(a){}d&&(h||(h=c("performance"))).clearMarks(b);(h||(h=c("performance"))).clearMeasures(a)}}function e(a){if(i){try{a=(h||(h=c("performance"))).getEntriesByName(a,"mark");if(a!=null&&a.length>0)return!0}catch(a){}return!1}}function f(a){if(i)try{(h||(h=c("performance"))).clearMarks(a)}catch(a){}}function m(a,b){if(j)try{(h||(h=c("performance"))).measure(a,b),h.clearMeasures(a)}catch(a){}}function n(a,b){j&&((h||(h=c("performance"))).mark(a,b),h.clearMarks(a))}function o(a,d){var e,f,g;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=(h||(h=c("performance"))).now();i.next=3;return b("regeneratorRuntime").awrap(d());case 3:f=i.sent;g=(h||(h=c("performance"))).now();m(a,{end:g,start:e});return i.abrupt("return",f);case 7:case"end":return i.stop()}},null,this)}g.measureStart=a;g.measureEnd=d;g.hasMark=e;g.clearMarks=f;g.measureModern=m;g.markModern=n;g.asyncMeasure=o}),98);
__d("GetLsDatabase",["ExecutionEnvironment","LSDefaultSyncGroups","LSPlatformLsInitLog","MAWDropCutoverThreadsTable","MessengerLogHistory","MultipleTabsLogger","Promise","UserTimingUtils","asyncToGeneratorRuntime","cr:4489","cr:665","cr:7000","cr:7351","cr:7471","gkx","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=b("cr:7000"))!=null?e:b("cr:7351"),k=c("gkx")("4471")&&c("gkx")("4463"),l=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("MessengerLogHistory").getInstance("db_init");c("promiseDone")(d("MultipleTabsLogger").getMultipleTabsAnnotation().then(function(b){a.debug("Has multiple tabs: "+b),d("MultipleTabsLogger").addAnnotationToQPLEvent(c("qpl")._(25305590,"1127"))}));a.debug("====Creating DB====");b("cr:4489")!=null&&b("cr:665")!=null&&(a.debug("Vaulting setup started"),b("cr:665").setupMainWaLogger(),yield d("UserTimingUtils").asyncMeasure("Setup Vaulting Materials",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield b("cr:4489").setupVaultMaterials()})),a.debug("Vaulting setup finished"));a.debug("Connecting to DB");var e=(yield b("cr:7471").createDB());a.debug("Connection established");yield e.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=k||j==null?[(i||(i=b("Promise"))).resolve(),(i||(i=b("Promise"))).resolve()]:[j.call(c),d("MAWDropCutoverThreadsTable").call(c)],f=e[0];e=e[1];yield (i||(i=b("Promise"))).all([f,e]);d("LSPlatformLsInitLog").addPoint("success_maw_data_deletion");a.debug("Seeding DB");yield d("LSDefaultSyncGroups").seedDb(c,void 0);a.debug("DB seeded")});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui");a.debug("====DB created====");return e});return function(){return a.apply(this,arguments)}}(),m;function a(){m==null&&(m=(h||(h=c("ExecutionEnvironment"))).isInBrowser?l():new(i||(i=b("Promise")))(function(){}));return m}g.get=a}),98);
__d("IGDSInstagramWordmarkFilledIcon",["IGDSSVGIconBase.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{aspectRatio:3.411764705882353,viewBox:"0 0 116 34",children:i.jsx("path",{clipRule:"evenodd",d:"M5.97.615C3.597 1.613.988 4.427.163 7.962c-1.045 4.478 3.3 6.372 3.656 5.75.42-.728-.778-.975-1.024-3.299-.319-3 1.072-6.353 2.824-7.824.324-.275.309.106.309.81 0 1.259-.07 12.555-.07 14.913 0 3.19-.13 4.198-.367 5.192-.239 1.01-.623 1.691-.332 1.954.325.294 1.715-.405 2.52-1.53.964-1.351 1.302-2.972 1.363-4.734.073-2.123.07-5.491.073-7.412.002-1.762.03-6.923-.032-10.025C9.068.997 6.964.197 5.971.615Zm84.312 14.93c-.076 1.658-.443 2.955-.897 3.869-.88 1.77-2.705 2.32-3.48-.224-.422-1.388-.442-3.704-.139-5.64.31-1.973 1.173-3.461 2.602-3.327 1.41.132 2.069 1.954 1.914 5.322Zm-23.763 10.29c-.02 2.755-.451 5.172-1.379 5.873-1.315.995-3.084.249-2.718-1.761.325-1.78 1.856-3.597 4.1-5.818 0 0 .006.507-.003 1.706Zm-.36-10.307c-.08 1.51-.47 3.029-.897 3.886-.88 1.77-2.717 2.323-3.48-.224-.52-1.742-.395-3.996-.138-5.416.334-1.841 1.145-3.55 2.601-3.55 1.416 0 2.114 1.557 1.914 5.304Zm-13.765-.023c-.086 1.6-.398 2.937-.897 3.909-.903 1.758-2.692 2.316-3.48-.224-.568-1.833-.375-4.33-.138-5.68.35-2.001 1.23-3.421 2.601-3.287 1.408.138 2.094 1.954 1.914 5.282Zm63.085 1.87c-.344 0-.501.356-.632.955-.451 2.084-.925 2.554-1.536 2.554-.683 0-1.297-1.032-1.455-3.098-.124-1.624-.104-4.614.055-7.588.032-.61-.137-1.215-1.77-1.81-.703-.257-1.727-.634-2.236.598-1.437 3.481-2.001 6.245-2.133 7.368-.006.058-.077.07-.09-.066-.084-.9-.273-2.533-.296-5.966-.005-.67-.147-1.24-.883-1.708-.479-.302-1.932-.838-2.455-.2-.453.52-.978 1.923-1.523 3.586-.443 1.351-.752 2.266-.752 2.266s.006-3.647.01-5.03c.004-.522-.354-.696-.462-.728-.483-.14-1.438-.376-1.843-.376-.5 0-.623.28-.623.689 0 .054-.079 4.8-.079 8.12 0 .145 0 .302.002.47-.277 1.525-1.174 3.596-2.149 3.596-.976 0-1.437-.866-1.437-4.824 0-2.308.07-3.313.103-4.982.02-.961.058-1.7.056-1.867-.008-.515-.894-.774-1.306-.87-.414-.095-.775-.134-1.056-.117-.398.023-.679.284-.679.643l.002.561c-.512-.808-1.337-1.37-1.885-1.532-1.477-.44-3.02-.05-4.182 1.581-.924 1.296-1.481 2.764-1.7 4.874-.16 1.543-.108 3.106.176 4.43-.343 1.491-.983 2.103-1.683 2.103-1.015 0-1.752-1.663-1.666-4.539.057-1.892.434-3.218.846-5.139.176-.82.034-1.248-.325-1.658-.33-.377-1.03-.57-2.037-.333-.717.17-1.743.35-2.681.49 0 0 .057-.227.103-.626.243-2.095-2.026-1.925-2.75-1.255-.432.399-.726.87-.839 1.717-.176 1.344.917 1.978.917 1.978-.358 1.647-1.238 3.798-2.146 5.352-.486.834-.858 1.451-1.338 2.107-.001-.244-.004-.488-.004-.732-.01-3.461.035-6.186.055-7.168.02-.961.059-1.68.057-1.848-.006-.376-.225-.518-.68-.698a4.82 4.82 0 0 0-1.373-.307c-.623-.048-1 .283-.99.674.003.074.003.53.003.53-.512-.809-1.336-1.37-1.886-1.533-1.476-.44-3.019-.05-4.18 1.581-.925 1.296-1.53 3.115-1.702 4.859-.159 1.624-.13 3.004.089 4.166-.236 1.165-.912 2.382-1.675 2.382-.976 0-1.532-.866-1.532-4.824 0-2.308.07-3.312.104-4.982.02-.961.057-1.7.055-1.867-.007-.515-.894-.774-1.306-.87-.431-.1-.804-.137-1.09-.115-.377.028-.642.367-.642.62v.582c-.513-.808-1.338-1.37-1.886-1.532-1.478-.44-3.01-.044-4.182 1.581-.764 1.06-1.382 2.234-1.7 4.835a16.19 16.19 0 0 0-.127 2.113c-.305 1.868-1.65 4.021-2.75 4.021-.644 0-1.258-1.252-1.258-3.921 0-3.557.22-8.62.256-9.107 0 0 1.39-.024 1.66-.027.694-.008 1.322.009 2.246-.038.463-.024.91-1.691.43-1.898-.215-.094-1.747-.175-2.354-.188a63.804 63.804 0 0 1-1.933-.117s.128-3.36.158-3.716c.025-.296-.357-.448-.575-.54C39.877.79 39.4.682 38.836.565c-.78-.16-1.134-.003-1.202.657-.105 1.001-.158 3.936-.158 3.936-.572 0-2.528-.113-3.1-.113-.532 0-1.106 2.294-.37 2.322.845.033 2.32.062 3.297.091 0 0-.043 5.147-.043 6.735l.001.49c-.537 2.812-2.433 4.331-2.433 4.331.408-1.86-.424-3.257-1.921-4.44-.552-.436-1.64-1.26-2.859-2.165 0 0 .706-.697 1.332-2.1.444-.994.462-2.132-.626-2.382-1.798-.415-3.281.91-3.724 2.324-.342 1.095-.159 1.907.511 2.752l.158.188a73.512 73.512 0 0 1-1.436 2.66c-1.311 2.274-2.3 4.073-3.05 4.073-.598 0-.59-1.826-.59-3.536 0-1.475.109-3.691.196-5.985.028-.76-.35-1.192-.984-1.584-.386-.237-1.209-.705-1.685-.705-.713 0-2.77.097-4.715 5.736-.244.71-.726 2.005-.726 2.005l.042-6.78c0-.159-.084-.313-.278-.418-.327-.178-1.203-.543-1.98-.543-.371 0-.557.173-.557.517l-.067 10.61c0 .806.02 1.746.1 2.157.08.412.208.747.366.946.16.2.342.351.645.413.282.058 1.824.257 1.905-.334.095-.708.099-1.474.909-4.33 1.26-4.449 2.903-6.618 3.676-7.389.135-.135.29-.143.282.078-.033.975-.15 3.411-.227 5.481-.209 5.54.796 6.567 2.231 6.567 1.1 0 2.649-1.095 4.309-3.866a938.24 938.24 0 0 0 2.761-4.641c.504.467 1.069.97 1.633 1.507 1.311 1.248 1.742 2.434 1.456 3.559-.219.86-1.042 1.746-2.505.885-.428-.251-.61-.446-1.04-.729-.23-.152-.581-.198-.793-.038-.548.414-.862.942-1.04 1.595-.175.634.46.97 1.118 1.264.565.254 1.783.482 2.559.508 3.023.102 5.446-1.464 7.133-5.503.302 3.488 1.586 5.462 3.818 5.462 1.493 0 2.99-1.935 3.644-3.838.187.776.465 1.45.825 2.021 1.72 2.733 5.057 2.145 6.732-.176.519-.717.597-.975.597-.975.244 2.192 2.004 2.958 3.011 2.958 1.13 0 2.295-.536 3.11-2.38.097.202.201.392.315.573 1.72 2.733 5.057 2.145 6.733-.176.079-.109.147-.207.207-.296l.05 1.44-1.544 1.418c-2.586 2.377-4.551 4.18-4.695 6.281-.184 2.677 1.98 3.673 3.62 3.803 1.738.139 3.229-.826 4.144-2.174.805-1.187 1.332-3.742 1.294-6.266-.016-1.011-.04-2.295-.061-3.672a29.478 29.478 0 0 0 2.873-3.959c1.026-1.704 2.126-3.994 2.69-5.775 0 0 .955.008 1.976-.06.325-.02.42.047.36.286-.074.29-1.29 4.993-.18 8.126.76 2.145 2.472 2.834 3.487 2.834 1.188 0 2.325-.9 2.934-2.236.074.149.15.293.234.426 1.72 2.733 5.045 2.141 6.733-.176.381-.522.597-.975.597-.975.363 2.268 2.12 2.969 3.129 2.969 1.048 0 2.044-.432 2.852-2.349.034.845.087 1.535.171 1.752.051.133.349.3.567.381.959.357 1.938.189 2.3.115.251-.051.448-.253.474-.774.069-1.369.027-3.669.441-5.377.694-2.869 1.342-3.981 1.649-4.532.172-.309.366-.359.374-.033.014.661.047 2.602.316 5.209.197 1.918.461 3.051.664 3.41.58 1.025 1.295 1.074 1.877 1.074.37 0 1.145-.102 1.075-.755-.034-.318.025-2.285.71-5.11.448-1.845 1.193-3.513 1.461-4.122.099-.225.146-.048.144-.013-.057 1.27-.183 5.426.333 7.7.7 3.08 2.724 3.424 3.429 3.424 1.507 0 2.738-1.149 3.153-4.172.1-.727-.047-1.289-.491-1.289Z",fill:"currentColor",fillRule:"evenodd"})}))}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);
__d("usePrefetchRouteDefinition",["PolarisMonitorErrors","react","useCometRouterDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect;function a(a){var b=c("useCometRouterDispatcher")();i(function(){try{b==null?void 0:b.prefetchRouteDefinition(a)}catch(a){d("PolarisMonitorErrors").logError(a)}},[a,b])}g["default"]=a}),98);
__d("PolarisFeedActionClearFeedBadges",[],(function(a,b,c,d,e,f){"use strict";function a(){return function(a){return a({badgeCount:0,type:"FEED_SET_BADGE_COUNT"})}}f.clearFeedBadges=a}),66);
__d("PolarisMobileNavLoggedInButton.react",["IGDSBox.react","PolarisFastLink.react","PolarisUA","PolarisUserAvatar.react","qex","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).unstable_useMemoCache,k=i,l={avatarSelected:{borderTopColor:"xskfcea",borderEndColor:"xssw1gd",borderBottomColor:"x1rx6pd",borderStartColor:"xbgn65m",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",boxSizing:"x9f619",height:"x1gnnpzl",position:"x10l6tqk",width:"x1849jeq",$$css:!0},badged:{backgroundColor:"x14vhib7",borderTopStartRadius:"xm3z3ea",borderTopEndRadius:"x1x8b98j",borderBottomEndRadius:"x131883w",borderBottomStartRadius:"x16mih1h",bottom:"x1wa3icf",content:"x14axycx",height:"xqu0tyb",marginTop:"xdj266r",marginEnd:"xkrivgy",marginBottom:"xat24cr",marginStart:"x1gryazu",position:"x10l6tqk",transform:"xgryjkp",width:"x51ohtg",$$css:!0},bannerContainer:{alignItems:"x1qjc9v5",bottom:"x1escl5o",position:"x10l6tqk",$$css:!0},defaultWrapper:{borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",fontSize:"xk390pu",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",verticalAlign:"x11njtxf",$$css:!0},iconWrapper:{alignItems:"x6s0dn4",height:"x5yr21d",justifyContent:"xl56j7k",position:"x1n2onr6",$$css:!0},menuLink:{display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",$$css:!0}};function a(a){var b=j(27),e=a.Icon,f=a.altText,g=a.badged,i=a["data-testid"],m=a.href,n=a.notificationBanner,o=a.onClick,p=a.onProfile,q=a.productAttribution;a=a.viewer;p=p===void 0?!1:p;var r;b[0]!==a||b[1]!==p||b[2]!==f||b[3]!==e?(r=a!=null?k.jsxs(k.Fragment,{children:[k.jsx("div",{className:(h||(h=c("stylex")))(p&&l.avatarSelected)}),k.jsx(c("PolarisUserAvatar.react"),{alt:f,isLink:!1,profilePictureUrl:a.profilePictureUrl,size:24,username:a.username})]}):k.jsx(e,{alt:f,color:"ig-primary-text",size:24}),b[0]=a,b[1]=p,b[2]=f,b[3]=e,b[4]=r):r=b[4];a=r;b[5]===Symbol["for"]("react.memo_cache_sentinel")?(p="x78zum5 x5yr21d xl56j7k",b[5]=p):p=b[5];if(b[6]===Symbol["for"]("react.memo_cache_sentinel")){e=d("PolarisUA").isMobile()&&((f=c("qex")._("752"))!=null?f:!1);b[6]=e}else e=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(r="x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 xdt5ytf x2lah0s xk390pu xdj266r x11i5rnm xat24cr x1mh8g0r xexx8yu x4uap5 x18d9i69 xkhd6sd x11njtxf x1qjc9v5 x1escl5o x10l6tqk",b[7]=r):r=b[7];b[8]!==n?(f=k.jsx("div",{className:r,children:n}),b[8]=n,b[9]=f):f=b[9];b[10]===Symbol["for"]("react.memo_cache_sentinel")?(r="x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 xdt5ytf x2lah0s xk390pu xdj266r x11i5rnm xat24cr x1mh8g0r xexx8yu x4uap5 x18d9i69 xkhd6sd x11njtxf x6s0dn4 x5yr21d xl56j7k x1n2onr6",b[10]=r):r=b[10];b[11]!==a?(n=k.jsx("div",{className:r,children:a}),b[11]=a,b[12]=n):n=b[12];b[13]!==i||b[14]!==m||b[15]!==o||b[16]!==q||b[17]!==f||b[18]!==n?(r=k.jsxs(c("PolarisFastLink.react"),{className:p,"data-testid":void 0,href:m,onClick:o,preloadCodeOnMount:e,productAttribution:q,children:[f,n]}),b[13]=i,b[14]=m,b[15]=o,b[16]=q,b[17]=f,b[18]=n,b[19]=r):r=b[19];a=g===!0&&l.badged;b[20]!==a?(p=(h||(h=c("stylex")))(a),b[20]=a,b[21]=p):p=b[21];b[22]!==p?(e=k.jsx("div",{className:p}),b[22]=p,b[23]=e):e=b[23];b[24]!==r||b[25]!==e?(i=k.jsxs(c("IGDSBox.react"),{alignItems:"center",flex:"grow",height:"100%",justifyContent:"center",position:"relative",children:[r,e]}),b[24]=r,b[25]=e,b[26]=i):i=b[26];return i}g["default"]=a}),98);
__d("PolarisMobileNavLoggedIn.react",["IGDBadgeIcon.react","IGDSBox.react","IGDSHeartPanoFilledIcon","IGDSHeartPanoOutlineIcon","IGDSHomePanoFilledIcon","IGDSHomePanoOutlineIcon","IGDSReelsPanoFilledIcon","IGDSReelsPanoOutlineIcon","IGDSSearchFilledIcon","IGDSSearchPanoOutlineIcon","IGDSUserPanoFilledIcon","IGDSUserPanoOutlineIcon","IGRouter","PolarisLinkBuilder","PolarisMobileNavLoggedInButton.react","PolarisNavigationActionConstants","PolarisNavigationStrings","PolarisPanavisionQEHelpers","PolarisRoutes","PolarisUA","RunComet","nullthrows","qex","react","useCometRouterDispatcher","usePolarisOnHomeClick","usePrefetchRouteDefinition"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useRef,l=b.unstable_useMemoCache,m=d("PolarisUA").isMobile()&&((e=c("qex")._("746"))!=null?e:!1);function a(a){var b=l(51),e=a.hasActivityUnread,f=a.hasFeedUnread,g=a.navSelection,h=a.onNavClick,n=a.productAttribution;a=a.viewer;c("usePrefetchRouteDefinition")(d("PolarisRoutes").CREATE_STYLE_PATH);var o=d("IGRouter").useIGLocation(),p=a==null?void 0:a.username,q;b[0]!==p?(q=d("PolarisLinkBuilder").buildUserLink(c("nullthrows")(p)),b[0]=p,b[1]=q):q=b[1];var r=q,s=c("useCometRouterDispatcher")(),t=k(!1);b[2]!==s||b[3]!==r?(p=function(){if(m===!0&&t.current===!1){var a=d("RunComet").onAfterLoad(function(){if(s!=null){var a;s.preloadRouteCode((a=d("PolarisRoutes")).FEED_PATH);s.preloadRouteCode(a.DISCOVER_MEDIA_PATH);s.preloadRouteCode(a.POLARIS_CLIPS_TAB_PAGE_PATH);s.preloadRouteCode(a.ACTIVITY_FEED_PATH);s.preloadRouteCode(r)}});t.current=!0;return function(){t.current=!1,a&&a.remove()}}return function(){t.current=!1}},q=[s,r],b[2]=s,b[3]=r,b[4]=p,b[5]=q):(p=b[4],q=b[5]);j(p,q);var u=c("usePolarisOnHomeClick")();b[6]!==u||b[7]!==h?(p=function(){u(),h(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_HOME)},b[6]=u,b[7]=h,b[8]=p):p=b[8];q=p;b[9]!==h?(p=function(){h(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_SEARCH_EXPLORE)},b[9]=h,b[10]=p):p=b[10];p=p;var v;b[11]!==h?(v=function(){h(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_ACTIVITY)},b[11]=h,b[12]=v):v=b[12];v=v;var w;b[13]!==h?(w=function(){h(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_OWN_PROFILE)},b[13]=h,b[14]=w):w=b[14];w=w;var x;b[15]!==h?(x=function(){h(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_REELS)},b[15]=h,b[16]=x):x=b[16];x=x;var y;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(y=d("PolarisPanavisionQEHelpers").hasMobileNavigationRedesign(),b[17]=y):y=b[17];y=y;var z;b[18]===Symbol["for"]("react.memo_cache_sentinel")?(z="x6s0dn4 x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 x1q0g3np x2lah0s xk390pu x5yr21d xdj266r x11i5rnm xat24cr x1mh8g0r xexx8yu x4uap5 x18d9i69 xkhd6sd x1n2onr6 x11njtxf",b[18]=z):z=b[18];var A=g===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_HOME?c("IGDSHomePanoFilledIcon"):c("IGDSHomePanoOutlineIcon"),B;b[19]!==f||b[20]!==A||b[21]!==q||b[22]!==n?(B=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").HOME_TEXT,badged:f,href:d("PolarisRoutes").FEED_PATH,Icon:A,onClick:q,productAttribution:n}),b[19]=f,b[20]=A,b[21]=q,b[22]=n,b[23]=B):B=b[23];f=g===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_SEARCH_EXPLORE?c("IGDSSearchFilledIcon"):c("IGDSSearchPanoOutlineIcon");b[24]!==f||b[25]!==p||b[26]!==n?(A=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").SEARCH_TEXT,href:d("PolarisRoutes").DISCOVER_MEDIA_PATH,Icon:f,onClick:p,productAttribution:n}),b[24]=f,b[25]=p,b[26]=n,b[27]=A):A=b[27];q=g===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_REELS?c("IGDSReelsPanoFilledIcon"):c("IGDSReelsPanoOutlineIcon");b[28]!==q||b[29]!==x||b[30]!==n?(f=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").REELS_TEXT,href:d("PolarisRoutes").POLARIS_CLIPS_TAB_PAGE_PATH,Icon:q,onClick:x,productAttribution:n}),b[28]=q,b[29]=x,b[30]=n,b[31]=f):f=b[31];b[32]!==o||b[33]!==e||b[34]!==g||b[35]!==v||b[36]!==n?(p=y?i.jsx(c("IGDSBox.react"),{alignItems:"center",flex:"grow",height:"100%",justifyContent:"center",position:"relative",children:i.jsx(c("IGDBadgeIcon.react"),{location:o,productAttribution:{tap_point:"topnav-link"}})}):i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").ACTIVITY_TEXT,badged:e&&g!==d("PolarisNavigationActionConstants").NAVIGATION_SECTION_ACTIVITY,href:d("PolarisRoutes").ACTIVITY_FEED_PATH,Icon:g===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_ACTIVITY?c("IGDSHeartPanoFilledIcon"):c("IGDSHeartPanoOutlineIcon"),onClick:v,productAttribution:n}),b[32]=o,b[33]=e,b[34]=g,b[35]=v,b[36]=n,b[37]=p):p=b[37];q=g===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_OWN_PROFILE?c("IGDSUserPanoFilledIcon"):c("IGDSUserPanoOutlineIcon");x=g===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_OWN_PROFILE;b[38]!==r||b[39]!==q||b[40]!==w||b[41]!==x||b[42]!==n||b[43]!==a?(y=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").PROFILE_TEXT,href:r,Icon:q,onClick:w,onProfile:x,productAttribution:n,viewer:a}),b[38]=r,b[39]=q,b[40]=w,b[41]=x,b[42]=n,b[43]=a,b[44]=y):y=b[44];b[45]!==B||b[46]!==A||b[47]!==f||b[48]!==p||b[49]!==y?(o=i.jsxs("div",{className:z,"data-testid":void 0,children:[B,A,f,p,y]}),b[45]=B,b[46]=A,b[47]=f,b[48]=p,b[49]=y,b[50]=o):o=b[50];return o}g["default"]=a}),98);
__d("PolarisMobileNavLoggedOut.react",["IGDSBox.react","IGDSDirectPanoFilledIcon","IGDSDirectPanoOutlineIcon","IGDSHomePanoFilledIcon","IGDSHomePanoOutlineIcon","IGDSReelsPanoFilledIcon","IGDSReelsPanoOutlineIcon","IGDSSearchPanoFilledIcon","IGDSSearchPanoOutlineIcon","IGDSUserPanoFilledIcon","IGDSUserPanoOutlineIcon","PolarisAPIHelpers","PolarisLogger","PolarisMobileNavLoggedInButton.react","PolarisMobileNavLoggedOutUtils","PolarisNavigationActionConstants","PolarisNavigationStrings","PolarisRoutes","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.unstable_useMemoCache;function a(a){var b=k(47),e=a.analyticsContext,f=a.navSelection,g=a.onNavClick;a=a.productAttribution;var h,l;b[0]!==e?(h=function(){d("PolarisLogger").logAction("navBarImpression",{source:e})},l=[e],b[0]=e,b[1]=h,b[2]=l):(h=b[1],l=b[2]);j(h,l);b[3]!==f||b[4]!==e||b[5]!==g?(h=function(a){return function(){d("PolarisLogger").logAction("navBarClick",{current_nav_tab:f,destination_nav_tab:a,source:e}),g(a)}},b[3]=f,b[4]=e,b[5]=g,b[6]=h):h=b[6];l=h;b[7]===Symbol["for"]("react.memo_cache_sentinel")?(h=function(a){var b;a=(b={},b[d("PolarisMobileNavLoggedOutUtils").NAV_BAR_QUERY_PARAM]=d("PolarisMobileNavLoggedOutUtils").getQueryParam(a),b);return d("PolarisAPIHelpers").appendQueryParameters(d("PolarisRoutes").LANDING_PAGE_PATH,a)},b[7]=h):h=b[7];h=h;var m;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(m=h(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_LANDING),b[8]=m):m=b[8];var n=f===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_LANDING?c("IGDSHomePanoFilledIcon"):c("IGDSHomePanoOutlineIcon"),o;b[9]!==l?(o=l(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_LANDING),b[9]=l,b[10]=o):o=b[10];b[11]!==n||b[12]!==o||b[13]!==a?(m=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").HOME_TEXT,"data-testid":void 0,href:m,Icon:n,onClick:o,productAttribution:a}),b[11]=n,b[12]=o,b[13]=a,b[14]=m):m=b[14];b[15]===Symbol["for"]("react.memo_cache_sentinel")?(n=h(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_DIRECT),b[15]=n):n=b[15];o=f===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_DIRECT?c("IGDSDirectPanoFilledIcon"):c("IGDSDirectPanoOutlineIcon");var p;b[16]!==l?(p=l(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_DIRECT),b[16]=l,b[17]=p):p=b[17];b[18]!==o||b[19]!==p||b[20]!==a?(n=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").DIRECT_TEXT,"data-testid":void 0,href:n,Icon:o,onClick:p,productAttribution:a}),b[18]=o,b[19]=p,b[20]=a,b[21]=n):n=b[21];o=f===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_REELS?c("IGDSReelsPanoFilledIcon"):c("IGDSReelsPanoOutlineIcon");b[22]!==l?(p=l(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_REELS),b[22]=l,b[23]=p):p=b[23];var q;b[24]!==o||b[25]!==p||b[26]!==a?(q=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").REELS_TEXT,"data-testid":void 0,href:d("PolarisRoutes").POLARIS_CLIPS_TAB_PAGE_PATH,Icon:o,onClick:p,productAttribution:a}),b[24]=o,b[25]=p,b[26]=a,b[27]=q):q=b[27];o=f===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_SEARCH_EXPLORE?c("IGDSSearchPanoFilledIcon"):c("IGDSSearchPanoOutlineIcon");b[28]!==l?(p=l(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_SEARCH_EXPLORE),b[28]=l,b[29]=p):p=b[29];var r;b[30]!==o||b[31]!==p||b[32]!==a?(r=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").SEARCH_TEXT,"data-testid":void 0,href:d("PolarisRoutes").DISCOVER_MEDIA_PATH,Icon:o,onClick:p,productAttribution:a}),b[30]=o,b[31]=p,b[32]=a,b[33]=r):r=b[33];b[34]===Symbol["for"]("react.memo_cache_sentinel")?(o=h(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_OWN_PROFILE),b[34]=o):o=b[34];p=f===d("PolarisNavigationActionConstants").NAVIGATION_SECTION_OWN_PROFILE?c("IGDSUserPanoFilledIcon"):c("IGDSUserPanoOutlineIcon");b[35]!==l?(h=l(d("PolarisNavigationActionConstants").NAVIGATION_SECTION_OWN_PROFILE),b[35]=l,b[36]=h):h=b[36];b[37]!==p||b[38]!==h||b[39]!==a?(l=i.jsx(c("PolarisMobileNavLoggedInButton.react"),{altText:d("PolarisNavigationStrings").PROFILE_TEXT,"data-testid":void 0,href:o,Icon:p,onClick:h,productAttribution:a}),b[37]=p,b[38]=h,b[39]=a,b[40]=l):l=b[40];b[41]!==m||b[42]!==n||b[43]!==q||b[44]!==r||b[45]!==l?(o=i.jsxs(c("IGDSBox.react"),{alignItems:"center","data-testid":void 0,direction:"row",display:"flex",height:"100%",position:"relative",children:[m,n,q,r,l]}),b[41]=m,b[42]=n,b[43]=q,b[44]=r,b[45]=l,b[46]=o):o=b[46];return o}g.MobileNavLoggedOut=a}),98);
__d("PolarisMobileTopNavLoggedOut.react",["fbt","IGDSBox.react","IGDSButton.react","IGDSInstagramWordmarkFilledIcon","IGRouter","PolarisAppInstallStrings","PolarisConfig","PolarisFastLink.react","PolarisIgLiteCarbonUpsellsUtils","PolarisLinkBuilder","PolarisLoggedOutCtaLogger","PolarisLoggedOutHasAppClipCardMetaTag","PolarisLoggedOutUpsellStrings","PolarisLogger","PolarisLoginLogger","PolarisOpenInApp","PolarisRoutes","react","stylex","usePolarisGetDeepLink"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect,m=b.unstable_useMemoCache,n={brand:{flexBasis:"x1mnsykr",flexShrink:"x2lah0s",height:"x1aekv1k",marginTop:"xzbgwbi",$$css:!0},button:{borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",height:"xc9qbxq",$$css:!0},gradientBackground:{alignItems:"x1qjc9v5",backgroundImage:"x12lflt5",borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",fontSize:"xk390pu",height:"x1kysglf",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x169t7cy",marginLeft:null,marginRight:null,paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",position:"x10l6tqk",verticalAlign:"x11njtxf",width:"xh8yej3",$$css:!0},gradientBackgroundSpacing:{marginTop:"x5i9c7l",$$css:!0},hideText:{display:"x1lliihq",overflowX:"x6ikm8r",overflowY:"x10wlt62",textIndent:"xevxmoj",whiteSpace:"xuxw1ft",$$css:!0},loginActionAndOpenAppActionSeparator:{width:"x1fsd2vl",$$css:!0},root:{alignItems:"x1qjc9v5",borderTopWidth:"x972fbf",borderEndWidth:"xcfux6l",borderBottomWidth:"x1qhh985",borderStartWidth:"xm0m39n",boxSizing:"x9f619",display:"x78zum5",flexDirection:"x1q0g3np",flexShrink:"x2lah0s",fontSize:"xk390pu",height:"x3igimt",justifyContent:"x1qughib",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",paddingTop:"xexx8yu",paddingEnd:"x1pi30zi",paddingBottom:"x18d9i69",paddingStart:"x1swvt13",position:"x1n2onr6",verticalAlign:"x11njtxf",$$css:!0},signupAndLoginContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",textAlign:"xp4054r",$$css:!0}},o=140;function p(a){var b=m(6),e=a.alwaysWhiteText,f=a.isSecondary,g=a.onClick;a=a.returnUrl;var h;b[0]!==a?(h=d("PolarisLinkBuilder").buildLoginLink(a,{source:"mobile_nav"}),b[0]=a,b[1]=h):h=b[1];a=e?"white":f?"secondary_link":"primary_link";b[2]!==h||b[3]!==g||b[4]!==a?(e=k.jsx(c("IGDSBox.react"),{maxWidth:o,children:k.jsx(c("IGDSButton.react"),{href:h,label:d("PolarisLoggedOutUpsellStrings").LOGIN_BUTTON_TEXT,onClick:g,variant:a,xstyle:n.button})}),b[2]=h,b[3]=g,b[4]=a,b[5]=e):e=b[5];return e}function q(a){var b=m(3),e=a.isSecondary;a=a.onClick;e=e?"secondary":"primary";var f;b[0]!==a||b[1]!==e?(f=k.jsx(c("IGDSBox.react"),{maxWidth:o,children:k.jsx(c("IGDSButton.react"),{label:d("PolarisAppInstallStrings").OPEN_APP_TEXT,onClick:a,variant:e,xstyle:n.button})}),b[0]=a,b[1]=e,b[2]=f):f=b[2];return f}function a(a){var b=m(39),e=a.alwaysWhiteText,f=a.analyticsContext,g=a.productAttribution;a=a.withGradientBackground;e=e===void 0?!1:e;a=a===void 0?!1:a;var j=c("usePolarisGetDeepLink")(),o;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(o=d("PolarisIgLiteCarbonUpsellsUtils").isIgLiteCarbonUpsellsEligible(),b[0]=o):o=b[0];var r=o;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(o=c("PolarisLoggedOutHasAppClipCardMetaTag")(),b[1]=o):o=b[1];o=o;var s,t;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(s=function(){d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"mobile_navigation",ctaVersion:r?"instagramlitecarbon":"",eventName:"impression"})},t=[r],b[2]=s,b[3]=t):(s=b[2],t=b[3]);l(s,t);b[4]!==f?(s=function(){bb15:switch(f){case"resetPassword":d("PolarisLoginLogger").logLoginEvent({event_name:"account_recovery_page_login_clicked"});break bb15;default:d("PolarisLoginLogger").logLoginEvent({event_name:"mobile_nav_login_clicked"}),d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"mobile_navigation",ctaVersion:"",eventName:"login_click"})}},b[4]=f,b[5]=s):s=b[5];t=s;b[6]!==j?(s=function(a,b){a.preventDefault();d("PolarisLogger").logAction("appInstallClick",{medium:"installLink",platform:d("PolarisConfig").getAppPlatform(),triggering_source:b});d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"mobile_navigation",ctaVersion:r?"instagramlitecarbon":"",eventName:"app_open_click"});a=j();b=a.android;var c=a.ios;a=a.originalPath;d("PolarisOpenInApp").openInApp(b,c,a,r)},b[6]=j,b[7]=s):s=b[7];var u=s;b[8]===Symbol["for"]("react.memo_cache_sentinel")?(s="x1qjc9v5 x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 x1q0g3np x2lah0s xk390pu x3igimt x1qughib xdj266r x11i5rnm xat24cr x1mh8g0r xexx8yu x1pi30zi x18d9i69 x1swvt13 x1n2onr6 x11njtxf",b[8]=s):s=b[8];var v;b[9]!==a?(v=a&&k.jsx("div",{className:"x1qjc9v5 x12lflt5 x972fbf xcfux6l x1qhh985 xm0m39n x9f619 x78zum5 xdt5ytf x2lah0s xk390pu x1kysglf xdj266r x11i5rnm xat24cr x169t7cy xexx8yu x4uap5 x18d9i69 xkhd6sd x10l6tqk x11njtxf xh8yej3"}),b[9]=a,b[10]=v):v=b[10];var w=a&&n.gradientBackgroundSpacing,x;b[11]!==w?(x=(i||(i=c("stylex")))(n.brand,n.hideText,w),b[11]=w,b[12]=x):x=b[12];b[13]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._("__JHASH__EubW9vzR0uu__JHASH__"),b[13]=w):w=b[13];var y=e?"web-always-white":"ig-primary-text";b[14]!==y?(w=k.jsx(c("IGDSInstagramWordmarkFilledIcon"),{alt:w,color:y,size:103}),b[14]=y,b[15]=w):w=b[15];b[16]===Symbol["for"]("react.memo_cache_sentinel")?(y=h._("__JHASH__EubW9vzR0uu__JHASH__"),b[16]=y):y=b[16];b[17]!==g||b[18]!==w?(y=k.jsxs(c("PolarisFastLink.react"),{"data-testid":void 0,href:"/",productAttribution:g,children:[w,y]}),b[17]=g,b[18]=w,b[19]=y):y=b[19];b[20]!==x||b[21]!==y?(g=k.jsx("div",{className:x,children:y}),b[20]=x,b[21]=y,b[22]=g):g=b[22];w=a&&n.gradientBackgroundSpacing;b[23]!==w?(x=(i||(i=c("stylex")))(n.signupAndLoginContainer,w),b[23]=w,b[24]=x):x=b[24];b[25]!==e||b[26]!==t?(y=k.jsx(p,{alwaysWhiteText:e,isSecondary:o,onClick:t,returnUrl:d("PolarisRoutes").FEED_PATH}),b[25]=e,b[26]=t,b[27]=y):y=b[27];b[28]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx("div",{className:"x1fsd2vl"}),b[28]=a):a=b[28];b[29]!==u?(w=k.jsx(q,{isSecondary:o,onClick:function(a){return u(a,"mobile_nav_button")}}),b[29]=u,b[30]=w):w=b[30];b[31]!==x||b[32]!==y||b[33]!==w?(e=k.jsxs("div",{className:x,"data-testid":void 0,children:[y,a,w]}),b[31]=x,b[32]=y,b[33]=w,b[34]=e):e=b[34];b[35]!==v||b[36]!==g||b[37]!==e?(t=k.jsxs("div",{className:s,"data-testid":void 0,children:[v,g,e]}),b[35]=v,b[36]=g,b[37]=e,b[38]=t):t=b[38];return t}e=d("IGRouter").withIGRouter(a);g["default"]=e}),98);
__d("PolarisMobileNav.react",["cx","PolarisActivityStorySelectors","PolarisAutoplayViewpointManager.react","PolarisConfig","PolarisCreationActionCreationSelectMedia","PolarisFeedActionClearFeedBadges","PolarisImageFileForm.react","PolarisLoggedOutUtils","PolarisMobileNavLoggedIn.react","PolarisMobileNavLoggedOut.react","PolarisMobileNavLoggedOutUtils","PolarisMobileTopNavLoggedOut.react","PolarisNavigationActions","PolarisReactRedux","PolarisUpsellActions","PolarisViewpointReact.react","cr:4197","polarisFeedSelectors","react","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;e.useCallback;var k=e.useEffect;e.useMemo;var l=e.useRef,m=e.unstable_useMemoCache,n={tap_point:"topnav-link"};function o(a){var b=m(23),c=a.children,e=a.containerRef,f=a.isTopNav;a=a.isTransparent;e=e===void 0?null:e;f=f===void 0?!1:f;a=a===void 0?!1:a;var g=!d("PolarisConfig").isLoggedIn()&&f,h;b[0]!==g?(h=g?j.jsx(d("PolarisViewpointReact.react").ViewpointClipRegion,{height:44,id:"loggedOutMobileNav",top:0}):j.jsx(d("PolarisViewpointReact.react").ViewpointClipRegion,{bottom:0,height:44,id:"mobileNav"}),b[0]=g,b[1]=h):h=b[1];h=h;var i;b[2]!==g?(i=g?j.jsx(d("PolarisAutoplayViewpointManager.react").AutoplayViewpointClipRegion,{height:44,id:"loggedOutMobileNav",top:0}):j.jsx(d("PolarisAutoplayViewpointManager.react").AutoplayViewpointClipRegion,{bottom:0,height:44,id:"mobileNav"}),b[2]=g,b[3]=i):i=b[3];g=i;b[4]!==f?(i=f&&j.jsx("div",{className:"_abpa"}),b[4]=f,b[5]=i):i=b[5];var k;b[6]!==a?(k="_abpb"+(a?" _abpc":""),b[6]=a,b[7]=k):k=b[7];b[8]===Symbol["for"]("react.memo_cache_sentinel")?(a="_abpd",b[8]=a):a=b[8];b[9]!==e||b[10]!==c?(a=j.jsx("div",{className:a,ref:e,children:c}),b[9]=e,b[10]=c,b[11]=a):a=b[11];b[12]!==k||b[13]!==a?(e=j.jsx("div",{className:k,children:a}),b[12]=k,b[13]=a,b[14]=e):e=b[14];b[15]!==h||b[16]!==g||b[17]!==i||b[18]!==e?(c=j.jsxs(j.Fragment,{children:[h,g,i,e]}),b[15]=h,b[16]=g,b[17]=i,b[18]=e,b[19]=c):c=b[19];k=c;b[20]!==f||b[21]!==k?(a=f?j.jsx("div",{className:"_abpe",children:k}):k,b[20]=f,b[21]=k,b[22]=a):a=b[22];return a}function a(a){var e=m(51),f=a.analyticsContext,g=a.hideLoggedOutTopNav,h=a.isLoginModalOpen,i=a.navHeight,p=a.navSelection,q=a.onHeightChange,r=(a=d("PolarisReactRedux")).useDispatch(),s=c("usePolarisViewer")(),t=a.useSelector(d("PolarisActivityStorySelectors").hasUnread),u=a.useSelector(d("polarisFeedSelectors").getFeedBadgeCount);a=a.useSelector(d("PolarisActivityStorySelectors").showBanner);var v;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(v=function(a){return!!(a==null?void 0:(a=a.upsell)==null?void 0:a.shouldShowLoggedOutHalfSheet)},e[0]=v):v=e[0];v=d("PolarisReactRedux").useSelector(v);var w=l(void 0),x=l(null),y;e[1]!==f?(y=d("PolarisMobileNavLoggedOutUtils").isLoggedOutTopNavTransparent(f),e[1]=f,e[2]=y):y=e[2];y=y;var z;e[3]!==i||e[4]!==q?(z=function(){if(x.current){var a=x.current.getBoundingClientRect().height;a!==i&&q&&q(a)}},e[3]=i,e[4]=q,e[5]=z):z=e[5];var A=z;e[6]!==v||e[7]!==f||e[8]!==h?(z=v===!0&&d("PolarisLoggedOutUtils").hasNewLoggedOutCTA(f)&&h!==!0,e[6]=v,e[7]=f,e[8]=h,e[9]=z):z=e[9];v=z;h=v;e[10]!==r?(z=function(a){a.length&&(r(d("PolarisNavigationActions").trackEntrypoint()),r(d("PolarisCreationActionCreationSelectMedia").creationSelectMedia(a[0])))},e[10]=r,e[11]=z):z=e[11];v=z;e[12]!==r?(z=function(a){r(d("PolarisNavigationActions").setNavSelection(a))},e[12]=r,e[13]=z):z=e[13];z=z;var B;e[14]!==r?(B=function(){r(d("PolarisFeedActionClearFeedBadges").clearFeedBadges())},e[14]=r,e[15]=B):B=e[15];B=B;var C,D;e[16]!==A||e[17]!==r?(C=function(){A(),d("PolarisConfig").isLoggedIn()||r(d("PolarisUpsellActions").displayLoggedOutHalfSheet())},D=[r,A],e[16]=A,e[17]=r,e[18]=C,e[19]=D):(C=e[18],D=e[19]);k(C,D);e[20]!==u||e[21]!==t||e[22]!==p||e[23]!==B||e[24]!==z||e[25]!==a||e[26]!==s?(C=d("PolarisConfig").isLoggedIn()&&j.jsx(o,{children:j.jsx("div",{className:"_abpd",children:j.jsx(c("PolarisMobileNavLoggedIn.react"),{feedBadgeCount:u,hasActivityUnread:t,hasFeedUnread:!1,navSelection:p,onFeedTooltipHide:B,onNavClick:z,productAttribution:n,showActivityBanner:a,viewer:s})})}),e[20]=u,e[21]=t,e[22]=p,e[23]=B,e[24]=z,e[25]=a,e[26]=s,e[27]=C):C=e[27];e[28]!==g||e[29]!==y||e[30]!==f||e[31]!==x?(D=!d("PolarisConfig").isLoggedIn()&&g!==!0&&d("PolarisMobileNavLoggedOutUtils").shouldUseLoggedOutTopNav()&&j.jsx(o,{containerRef:x,isTopNav:!0,isTransparent:y,children:j.jsx(c("PolarisMobileTopNavLoggedOut.react"),{alwaysWhiteText:y,analyticsContext:f,productAttribution:n,withGradientBackground:y})}),e[28]=g,e[29]=y,e[30]=f,e[31]=x,e[32]=D):D=e[32];e[33]!==f||e[34]!==p||e[35]!==z?(u=!d("PolarisConfig").isLoggedIn()&&d("PolarisMobileNavLoggedOutUtils").shouldUseLoggedOutBottomNav(!1)&&j.jsx(o,{children:j.jsx(d("PolarisMobileNavLoggedOut.react").MobileNavLoggedOut,{analyticsContext:f,navSelection:p,onNavClick:z,productAttribution:n})}),e[33]=f,e[34]=p,e[35]=z,e[36]=u):u=e[36];e[37]!==h||e[38]!==f?(t=h&&b("cr:4197")!=null&&j.jsx(b("cr:4197"),{analyticsContext:f}),e[37]=h,e[38]=f,e[39]=t):t=e[39];e[40]===Symbol["for"]("react.memo_cache_sentinel")?(B=["image/jpeg"],e[40]=B):B=e[40];e[41]===Symbol["for"]("react.memo_cache_sentinel")?(a="_abpf",e[41]=a):a=e[41];e[42]!==v||e[43]!==w?(s=j.jsx(d("PolarisImageFileForm.react").ImageFileForm,{acceptMimeTypes:B,className:a,onFileChange:v,ref:w}),e[42]=v,e[43]=w,e[44]=s):s=e[44];e[45]!==C||e[46]!==D||e[47]!==u||e[48]!==t||e[49]!==s?(g=j.jsxs(j.Fragment,{children:[C,D,u,t,s]}),e[45]=C,e[46]=D,e[47]=u,e[48]=t,e[49]=s,e[50]=g):g=e[50];return g}g["default"]=a}),98);
__d("PolarisProfileTabVirtualFeed.react",["PolarisGenericVirtualFeed.react","PolarisPost.react","PolarisPostVariants","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).unstable_useMemoCache,j=h;function a(a){var b=i(11),e=a.analyticsContext,f=a.hasNextPage,g=a.isFetching,h=a.onNextPage,k=a.postIds;a=a.visibleCount;var l;b[0]!==k||b[1]!==e?(l=function(a){var b=a.index;a=a.isVisible;if(k==null)return null;var f=k[b];return j.jsx(c("PolarisPost.react"),{analyticsContext:e,id:f,isVisible:a,variant:d("PolarisPostVariants").VARIANTS.feed},b)},b[0]=k,b[1]=e,b[2]=l):l=b[2];l=l;var m;b[3]!==e||b[4]!==f||b[5]!==g||b[6]!==k||b[7]!==h||b[8]!==l||b[9]!==a?(m=j.jsx(c("PolarisGenericVirtualFeed.react"),{allowSampledScrollLogging:!0,analyticsContext:e,enablePrefetch:!1,enablePriorityFetching:!1,hasNextPage:f,isFetching:g,items:k,onNextPage:h,renderFeedItem:l,visibleCount:a}),b[3]=e,b[4]=f,b[5]=g,b[6]=k,b[7]=h,b[8]=l,b[9]=a,b[10]=m):m=b[10];return m}g["default"]=a}),98);
__d("PolarisProfileTabFeed.react",["IGDSSpinner.react","PolarisConfig","PolarisPaginationUtils","PolarisPostVariants","PolarisProfilePostsActionConstants","PolarisProfilePostsActions","PolarisProfilePostsSelectors","PolarisProfileQEHelpers","PolarisProfileTabVirtualFeed.react","PolarisReactRedux","PolarisSizing","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$2=function(){var a=c.props,b=a.hasNext;a=a.maxPostsToDisplay;b&&c.$1(d("PolarisProfilePostsActionConstants").PAGE_SIZE+a)},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidMount=function(){var a=this.props,b=a.onRequestFirst,c=a.shouldRequestFirst;a=a.user;c&&b(a.id)};e.$1=function(a){var b=this.props,c=b.fetching,e=b.hasNext,f=b.onRequestFirst,g=b.onRequestNext;b=b.user;if(c||!e)return;a<=d("PolarisProfilePostsActionConstants").PAGE_SIZE?f(b.id):g(b.id)};e.render=function(){var a=this.props,b=a.analyticsContext,e=a.fetching,f=a.hasNext,g=a.maxPostsToDisplay,h=a.postIds,j=a.renderEmptyProfile;a=a.shouldRequestFirst;if(a)return i.jsx("div",{className:"x1qjc9v5 x78zum5 xdt5ytf xsdox4t x1tfhste x1n2onr6 x11njtxf",children:i.jsx(c("IGDSSpinner.react"),{position:"absolute",size:"medium"})});return h.length===0&&!e?j:i.jsx(c("PolarisProfileTabVirtualFeed.react"),{analyticsContext:b,hasNextPage:f,isFetching:e,onNextPage:this.$2,postIds:h,variant:this.props.viewportWidth>=d("PolarisSizing").SITE_WIDTHS.narrow?d("PolarisPostVariants").VARIANTS.wide:d("PolarisPostVariants").VARIANTS.narrow,visibleCount:Math.min(g,h.length)})};return b}(i.Component);function a(a,b){b=b.user;var c=d("PolarisProfilePostsSelectors").getPaginationForUserId(a,b.id);b=d("PolarisProfilePostsSelectors").getAllPostIdsForUserId(a,b.id);var e=b.length>0&&b.some(function(b){b=d("polarisPostSelectors").getPostOrNullById(a,b);return(b==null?void 0:b.displayResources)==null||Number(b==null?void 0:b.numLikes)>0&&(b==null?void 0:b.likers)==null})||c==null;return{fetching:d("PolarisPaginationUtils").isFetching(c),hasNext:!!d("PolarisPaginationUtils").hasNextPage(c),maxPostsToDisplay:d("PolarisPaginationUtils").getVisibleCount(c),postIds:b,shouldRequestFirst:e}}function b(a){return{onRequestFirst:function(b){a(d("PolarisConfig").isLoggedIn()&&d("PolarisProfileQEHelpers").hasNativePostsOnProfile()?d("PolarisProfilePostsActions").requestProfilePostsV2(b,void 0,d("PolarisProfilePostsActionConstants").PAGE_SIZE):d("PolarisProfilePostsActions").requestProfilePosts(b,!0))},onRequestNext:function(b){a(d("PolarisConfig").isLoggedIn()&&d("PolarisProfileQEHelpers").hasNativePostsOnProfile()?d("PolarisProfilePostsActions").requestProfilePostsV2(b,void 0,d("PolarisProfilePostsActionConstants").PAGE_SIZE):d("PolarisProfilePostsActions").requestNextProfilePosts(b))}}}f=d("PolarisReactRedux").connect(a,b)(e);g.ProfileTabFeed=f}),98);